# ビットコイン投資サインツール 要件定義書（モック版）

## 1. プロジェクト概要

### 1.1 プロジェクト名
ビットコイン投資タイミング分析システム（プロトタイプ）

### 1.2 目的
**モック開発の目的**
- エンジニア・投資家向けのプロトタイプ作成
- UI/UXデザインの完成度を重視した視覚的デモ
- コンセプト実証とフィードバック収集

### 1.3 モックの特徴
- **デザイン重視**: 完成系に近いビジュアルデザイン
- **機能簡素**: 最小限の動作で概念実証
- **デモ用途**: 投資判断支援ツールのコンセプト提示

## 2. モック機能要件

### 2.1 【重要】UI/UXデザイン機能

#### レイアウト構成
```
┌─────────────────────────────────────────────────┐
│                ヘッダー                           │
├─────────┬───────────────────────────────────────┤
│         │                                     │
│サイドバー│             メイン                    │
│         │         (チャートエリア)               │
│         │                                     │
├─────────┴───────────────────────────────────────┤
│                フッター                           │
└─────────────────────────────────────────────────┘
```

- [x] **ヘッダー**
  - ロゴ・サービス名
  - 現在価格表示
  - 言語切替（JP/EN）
  - ユーザーメニュー（モック）
  - 高さ70px、画面上部に固定（position: fixed）
- [x] **サイドバー（左側）**
  - AIサイン履歴
  - サイン統計・パフォーマンス
  - サイン設定（通知等）
  - デモコントロール
- [x] **メインエリア**
  - TradingViewチャート（全画面表示）
  - シグナル通知オーバーレイ
  - チャートコントロール
- [x] **フッター**
  - 免責事項
  - 著作権表示
  - バージョン情報
  - 非固定（コンテンツと一緒にスクロール）

#### デザイン仕様
- [x] **ダークテーマ**
  - 背景色: #1a1a1a, #2d2d2d
  - テキスト: #ffffff, #cccccc
  - アクセント: rgb(3, 97, 173) (青), #ea5394 (ピンク)
- [x] **レスポンシブデザイン**
  - デスクトップ・タブレット対応
  - サイドバー折りたたみ機能

### 2.2 【簡素】データ機能
- [ ] **静的データ使用**
  - **BTCUSD価格データ**（JSON形式）
  - 時系列データ（OHLCV形式）
  - リアルタイム価格更新は模擬（setInterval）

### 2.3 【重要】AIサイン表示機能（モック）
- [ ] **Series Markers実装**
  - TradingView Lightweight Charts API使用
  - 買いサイン: `arrowUp` + 青色rgb(3, 97, 173) + 価格表示
  - 売りサイン: `arrowDown` + ピンク#ea5394 + 価格表示
- [ ] **AIサインの模擬表示**
  - 予め決められたポイントにマーカー配置
  - サイン発生時のUI演出（アニメーション等）
  - サイン詳細情報の表示
- [ ] **サイン表示仕様**
  ```javascript
  // 買いサイン例
  {
    time: timestamp,
    position: 'belowBar',
    color: 'rgb(3, 97, 173)', // 青
    shape: 'arrowUp',
    text: 'AI BUY Signal @ $45,000'
  }
  // 売りサイン例
  {
    time: timestamp,
    position: 'aboveBar',
    color: '#ea5394', // ピンク
    shape: 'arrowDown',
    text: 'AI SELL Signal @ $48,000'
  }
  ```
- [ ] **ユーザー体験重視**
  - サイン発生通知
  - サイン理由の表示（モック文言）
  - 履歴・統計表示

### 2.4 【重要】プレゼンテーション機能
- [ ] **デモシナリオ**
  - 過去の成功事例再生
  - シグナル精度のモック統計
  - パフォーマンス指標の表示
- [ ] **サイン通知機能**
  - リアルタイム風通知（ポップアップ）
  - サイン発生音（オプション）
  - 通知履歴表示

### 2.5 【重要】ユーザビリティ機能
- [ ] **直感的操作**
  - TradingViewデフォルト時間軸コントロール使用
  - サイドバー開閉
  - フルスクリーンモード
- [ ] **データ表示**
  - 現在価格のリアルタイム表示
  - 価格変動率（24h変動）
  - 最新サイン情報
- [ ] **多言語対応**
  - 日本語（デフォルト）
  - 英語切替機能
  - ヘッダーに言語セレクタ配置

## 3. モック技術要件

### 3.1 フロントエンド（重要）
- [x] **Vanilla JavaScript**
  - HTML/CSS/JavaScript のみ
  - **TradingView Lightweight Charts** (必須)
  - フレームワーク不使用（確認しやすさ重視）
- [x] **チャート機能 - TradingView Lightweight Charts**
  - ローソク足チャート表示
  - **Series Markers**: AIサイン表示
  - リアルタイム価格更新（WebSocket/API）
  - インタラクティブ操作（ズーム・パン）
  - カスタム時間軸切替機能
- [x] **時間足機能**
  - 対応時間足: 1m, 5m, 15m, 1h, 4h, 1d
  - 各時間足で1000本のローソク足表示
  - 時間足切替時の即座なデータ切替
  - カスタムボタンUI（1M, 5M, 15M, 1H, 4H, 1D）
  - 切替時通知なし（サイレント切替）
- [x] **リアルタイム更新機能**
  - WebSocket接続によるリアルタイムデータ取得
  - 1000本データバッファ管理（古いデータ自動削除）
  - 時間足別のリアルタイム更新頻度対応
  - ネットワーク断線時の自動再接続
- [x] **AIサイン表示仕様**
  - 買いサイン: `arrowUp` (青色rgb(3, 97, 173)、belowBar)
  - 売りサイン: `arrowDown` (ピンク#ea5394、aboveBar)  
  - AI分析結果テキスト表示
- [x] **AIサイン管理ルール**
  - **不変性**: 過去に出したサインの変更・削除は禁止
  - **時間足追従**: 時間足変更時にサインも適切な位置に自動移動
  - **サイン永続化**: 全時間足でサイン情報を保持
  - **サイン精度**: タイムスタンプベースの正確な位置表示
- [x] **デザインシステム**
  - Pure CSS（カスタム）
  - **ダークモード専用** (メインテーマ)
  - CSS Animations
  - Flexbox レイアウト（フッター非固定対応）

### 3.2 データ管理システム
- [ ] **リアルタイムデータ取得**
  - WebSocket API接続（Binance/coincheck等）
  - REST API フォールバック機能
  - 接続エラー時の自動再試行
- [ ] **データバッファ管理**
  - 各時間足1000本データ保持
  - メモリ効率的なデータ構造
  - 古いデータの自動削除機能
- [ ] **サインデータ管理**
  - タイムスタンプベースのサイン保存
  - 全時間足対応サイン変換システム
  - サイン不変性保証機能
- [ ] **多言語リソース**
  - 日本語・英語テキストファイル
  - JavaScriptによる動的言語切替

### 3.3 デプロイ要件
- [ ] **静的ファイル配信**
  - GitHub Pages / Netlify / Vercel
  - index.htmlファイルのみで動作
- [ ] **ファイル構成**
  ```
  /
  ├── index.html
  ├── styles.css
  ├── script.js
  ├── js/
  │   ├── chart-manager.js      # チャート管理
  │   ├── data-manager.js       # データ管理
  │   ├── signal-manager.js     # サイン管理
  │   └── websocket-client.js   # WebSocket接続
  ├── data/
  │   ├── btc-sample.json       # サンプルデータ
  │   ├── lang-ja.json          # 日本語リソース
  │   └── lang-en.json          # 英語リソース
  └── README.md
  ```
- [ ] **ブラウザ対応**
  - Chrome, Firefox, Safari, Edge（最新版）
  - モバイル: iOS Safari, Android Chrome
  - JavaScript ES6+ 対応必須

### 3.4 外部依存関係
- [ ] **TradingView Lightweight Charts**
  - CDN経由で読み込み
  - バージョン: 4.x系最新
- [ ] **フォント・アイコン**
  - Google Fonts (Roboto, Inter等)
  - Font Awesome / Feather Icons (CDN)

## 4. モック制約事項・方針

### 4.1 開発制約
- [x] **モック専用**: 本番運用は想定しない
- [x] **デザイン優先**: 機能よりもビジュアル完成度
- [x] **短期開発**: 2-4週間での完成を目指す

### 4.2 データ制約
- [x] **静的データ**: リアルタイムAPI不要
- [x] **サンプルシナリオ**: 決められたデモストーリー
- [x] **免責明記**: 投資助言ではない旨を明確化

### 4.3 パフォーマンス制約
- [x] **軽量化優先**: 高速ローディング
- [x] **レスポンシブ**: 60fps のスムーズアニメーション
- [x] **データ量制限**: 1ヶ月分の価格データのみ

### 4.4 セキュリティ制約
- [x] **クライアントサイドのみ**: サーバーサイド処理なし
- [x] **個人情報なし**: ユーザーデータ収集・保存なし
- [x] **HTTPS必須**: 本番環境はHTTPS配信

## 5. 開発計画

### 5.1 優先順位
1. **【最高】チャートUI設計・実装**
2. **【最高】AIサイン表示機能**
3. **【高】ダッシュボードレイアウト**
4. **【低】データ更新機能**

### 5.2 開発スケジュール（目安）
- [ ] **Week 1**: デザインシステム・チャート実装
- [ ] **Week 2**: ダッシュボード・AIサイン機能
- [ ] **Week 3**: ユーザー体験向上・微調整
- [ ] **Week 4**: デプロイ・デモ準備

## 6. 成功基準（モック版）

### 6.1 デモ成功基準
- [x] **視覚的インパクト**: プロフェッショナルな外観
- [x] **操作性**: 直感的なUI/UX
- [x] **ストーリー**: 分かりやすいデモシナリオ

### 6.2 技術検証基準
- [ ] **コンセプト実証**: AIサインツールの可能性
- [ ] **技術的実現性**: TradingView Lightweight Charts + リアルタイム更新
- [ ] **パフォーマンス検証**: 300本データ + リアルタイム更新の安定性
- [ ] **サイン管理検証**: 時間足切替時のサイン追従機能
- [ ] **フィードバック収集**: エンジニア・投資家からの意見

## 7. 想定ユーザーシナリオ

### 7.1 デモシナリオ例
1. **サイト訪問**: ダークテーマの投資ツールが表示
2. **チャート確認**: BTCUSDチャートを閲覧
3. **AIサイン体験**: 過去のBUY/SELLサインを確認
4. **履歴表示**: サイドバーでサイン履歴・統計を確認
5. **通知体験**: 新しいサインの通知を体験

### 7.2 ターゲットユーザー
- **エンジニア**: 技術的実現可能性の確認
- **投資家**: UI/UXとコンセプトの評価
- **開発チーム**: 本格開発の意思決定材料

## 8. アクセシビリティ要件

### 8.1 基本対応
- [ ] **キーボードナビゲーション**: Tab操作対応
- [ ] **コントラスト比**: WCAG 2.1 AA準拠
- [ ] **読み上げ対応**: alt属性、aria-label設定

---

**モック開発の注意事項**
- AIサインは模擬表示（実際のAI分析ではない）
- 投資助言ではないことを明確に表示
- 著作権: TradingView Lightweight Charts利用規約準拠